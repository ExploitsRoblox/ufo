<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>GD UFO - Extreme Speed</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            overflow: hidden; background: #000; 
            display: flex; justify-content: center; align-items: center; 
            height: 100vh; width: 100vw; font-family: 'Segoe UI', sans-serif;
        }
        #game-wrapper {
            position: relative;
            width: 95vw; height: 53.43vw; 
            max-height: 95vh; max-width: 168.88vh;
            border: 4px solid #333;
        }
        canvas { width: 100%; height: 100%; display: block; background: #001a33; }
        #ui {
            position: absolute; top: 5%; width: 100%; color: white;
            font-size: clamp(16px, 3vw, 28px); text-align: center;
            pointer-events: none; text-shadow: 2px 2px #000; z-index: 10;
        }
        .speed-val { font-weight: bold; color: #ff0055; }
    </style>
</head>
<body>
    <div id="game-wrapper">
        <div id="ui">
            <div id="score">Score: 0</div>
            <div id="speed-tag">Velocidade: <span class="speed-val">1x</span></div>
            <div id="msg">Aperte Espaço ou Seta Cima</div>
        </div>
        <canvas id="gameCanvas"></canvas>
    </div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const scoreElement = document.querySelector(".speed-val");

        canvas.width = 1280; 
        canvas.height = 720;

        let score = 0;
        let gameRunning = false;
        let gameSpeed = 7; 
        const gravity = 0.5;
        const jump = -9;

        // Portais: 1x, 2x, 3x, 4x e 5x
        const portalTypes = [
            { name: "0.01x", color: "#ff0000", speed: 4 },
            { name: "1x", color: "#00ccff", speed: 7 },
            { name: "1.5x", color: "#Af4Ef3", speed: 9 },
            { name: "2x", color: "#00ff00", speed: 11 },
            { name: "3x", color: "#ff00ff", speed: 15 },
            { name: "4x", color: "#ff3300", speed: 20 },
            { name: "4.5x", color: "#0000ff", speed: 23 },
            { name: "5x", color: "#ffffff", speed: 26 },
            { name: "6x", color: "#000000", speed: 30 }, 
        ];

        const ufo = {
            x: 180, y: 360, w: 60, h: 45, velocity: 0,
            draw() {
                ctx.lineWidth = 4;
                // Cúpula
                ctx.fillStyle = "rgba(135, 206, 250, 0.8)";
                ctx.fillRect(this.x + 10, this.y - 15, this.w - 20, 15);
                ctx.strokeRect(this.x + 10, this.y - 15, this.w - 20, 15);
                // Base
                ctx.fillStyle = "#00ff00";
                ctx.fillRect(this.x, this.y, this.w, this.h);
                ctx.strokeStyle = "black";
                ctx.strokeRect(this.x, this.y, this.w, this.h);
            },
            update() {
                if (gameRunning) {
                    this.velocity += gravity;
                    this.y += this.velocity;
                }
                if (this.y + this.h > canvas.height || this.y < 0) gameOver();
            }
        };

        let obstacles = [];

        function createObstacle() {
            const gap = 240;
            const minH = 100;
            const topH = Math.random() * (canvas.height - gap - (minH * 2)) + minH;
            const portalConfig = portalTypes[Math.floor(Math.random() * portalTypes.length)];
            
            obstacles.push({
                x: canvas.width,
                topH: topH,
                gap: gap,
                portal: portalConfig,
                portalActive: true,
                passed: false
            });
        }

        function updateObstacles() {
            if (!gameRunning) return;

            if (obstacles.length === 0 || obstacles[obstacles.length - 1].x < canvas.width - 550) {
                createObstacle();
            }

            for (let i = obstacles.length - 1; i >= 0; i--) {
                let o = obstacles[i];
                o.x -= gameSpeed;

                // Colisão Canos
                if (ufo.x + ufo.w > o.x && ufo.x < o.x + 80) {
                    if (ufo.y < o.topH || ufo.y + ufo.h > o.topH + o.gap) {
                        gameOver();
                    }
                }

                // Colisão Portal (Entrada da passagem)
                if (o.portalActive && ufo.x + ufo.w > o.x && ufo.x < o.x + 40) {
                    gameSpeed = o.portal.speed;
                    scoreElement.innerText = o.portal.name;
                    o.portalActive = false;
                    // Efeito visual de troca de velocidade
                    ctx.fillStyle = "white";
                    ctx.fillRect(0,0, canvas.width, canvas.height);
                }

                // Score
                if (!o.passed && o.x + 80 < ufo.x) {
                    score++;
                    document.getElementById("score").innerText = "Score: " + score;
                    o.passed = true;
                }

                if (o.x < -100) obstacles.splice(i, 1);
            }
        }

        function draw() {
            // BG
            ctx.fillStyle = "#001122";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Grid
            ctx.strokeStyle = "rgba(255,255,255,0.05)";
            for(let x=0; x<canvas.width; x+=60) { ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x, canvas.height); ctx.stroke(); }

            obstacles.forEach(o => {
                // Portal na entrada
                if(o.portalActive) {
                    ctx.fillStyle = o.portal.color;
                    ctx.shadowBlur = 20; ctx.shadowColor = o.portal.color;
                    ctx.beginPath();
                    ctx.ellipse(o.x + 10, o.topH + o.gap/2, 30, 100, 0, 0, Math.PI*2);
                    ctx.fill();
                    ctx.shadowBlur = 0;
                }

                // Canos
                ctx.fillStyle = "#111";
                ctx.strokeStyle = "#444";
                ctx.lineWidth = 4;
                ctx.fillRect(o.x, 0, 80, o.topH);
                ctx.strokeRect(o.x, 0, 80, o.topH);
                ctx.fillRect(o.x, o.topH + o.gap, 80, canvas.height);
                ctx.strokeRect(o.x, o.topH + o.gap, 80, canvas.height);
            });

            ufo.draw();
        }

        function gameOver() {
            gameRunning = false;
            document.getElementById("msg").innerText = "GAME OVER - Clique para Reiniciar";
        }

        function resetGame() {
            obstacles = [];
            score = 0;
            gameSpeed = 7;
            ufo.y = 360;
            ufo.velocity = 0;
            document.getElementById("score").innerText = "Score: 0";
            scoreElement.innerText = "1x";
            document.getElementById("msg").innerText = "";
            gameRunning = true;
        }

        window.addEventListener("keydown", (e) => {
            if (e.code === "Space" || e.code === "ArrowUp") {
                e.preventDefault();
                if (!gameRunning) resetGame();
                else ufo.velocity = jump;
            }
        });
        window.addEventListener("mousedown", () => {
            if (!gameRunning) resetGame();
            else ufo.velocity = jump;
        });

        function gameLoop() {
            ufo.update();
            updateObstacles();
            draw();
            requestAnimationFrame(gameLoop);
        }
        gameLoop();
    </script>
</body>
</html>